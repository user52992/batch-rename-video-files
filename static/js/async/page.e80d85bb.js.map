{"version":3,"file":"static/js/async/page.e80d85bb.js","sources":["webpack://batch-rename-video-files/./node_modules/.pnpm/@modern-js-reduck+store@1.1.13/node_modules/@modern-js-reduck/store/dist/esm/model/model.js","webpack://batch-rename-video-files/./src/models/file-list.ts","webpack://batch-rename-video-files/./src/models/task-list.ts","webpack://batch-rename-video-files/./src/routes/page.tsx","webpack://batch-rename-video-files/./src/utils.ts"],"sourcesContent":["import { initializerSymbol } from \"../utils/misc\";\nconst model = (name) => ({\n  define(modelDesc) {\n    let modelInitializer;\n    if (typeof modelDesc === \"function\") {\n      modelInitializer = modelDesc;\n    } else {\n      modelInitializer = () => modelDesc;\n    }\n    const modelCache = /* @__PURE__ */ new Map();\n    const createResponse = (initializer) => {\n      const response = (namespace) => {\n        const cachedModel = modelCache.get(namespace);\n        if (cachedModel) {\n          return cachedModel;\n        }\n        const clonedModelInitializer = (...args) => {\n          const result = initializer(...args);\n          return result;\n        };\n        const modelInstance = createResponse(clonedModelInitializer);\n        modelCache.set(namespace, modelInstance);\n        modelInstance._name = namespace || name;\n        return modelInstance;\n      };\n      response._name = name;\n      Object.defineProperty(response, initializerSymbol, {\n        configurable: false,\n        enumerable: false,\n        value: initializer\n      });\n      return response;\n    };\n    return createResponse(modelInitializer);\n  }\n});\nexport default model;\n","import { model } from '@modern-js/runtime/model';\n\ntype State = {\n\tfileList: File[];\n};\n\nexport default model<State>('file-list').define({\n\tstate: {\n\t\tfileList: [],\n\t},\n\tactions: {\n\t\tsetFileList: (draft: State, payload: File[]) => {\n\t\t\tdraft.fileList = payload;\n\t\t},\n\t},\n});\n","import { sleep } from '@/utils';\nimport { model } from '@modern-js/runtime/model';\n\ntype State = {\n\ttaskList: Array<() => void>;\n};\n\nexport default model<State>('task-list').define({\n\tstate: {\n\t\ttaskList: [],\n\t},\n\tactions: {\n\t\tresetTaskList: (draft: State) => {\n\t\t\tdraft.taskList = [];\n\t\t},\n\t\taddTask: (draft: State, payload: () => void) => {\n\t\t\tdraft.taskList.push(payload);\n\t\t},\n\t\texecuteAllTask: (draft: State) => {\n\t\t\tconst f = async (taskList: State['taskList']) => {\n\t\t\t\twhile (taskList.length > 0) {\n\t\t\t\t\tconst task = taskList.shift();\n\t\t\t\t\tawait sleep(1000);\n\t\t\t\t\ttask?.();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tf([...draft.taskList]);\n\t\t},\n\t},\n});\n","import fileListModel from '@/models/file-list';\nimport taskListModel from '@/models/task-list';\nimport { Banner, Button, Space, Typography, Upload } from '@douyinfe/semi-ui';\nimport { useModel } from '@modern-js/runtime/model';\nimport { useNavigate } from '@modern-js/runtime/router';\nimport { type FC, useEffect } from 'react';\nimport Style from './index.module.scss';\n\nconst Index: FC = () => {\n\tconst navigate = useNavigate();\n\tconst [{ fileList }, { setFileList }] = useModel(fileListModel);\n\tconst [_, { resetTaskList }] = useModel(taskListModel);\n\n\tuseEffect(() => {\n\t\tsetFileList([]);\n\t\tresetTaskList();\n\t}, [setFileList, resetTaskList]);\n\n\tconst handleFileChange = (fileList: File[]) => {\n\t\tsetFileList(fileList);\n\t};\n\n\treturn (\n\t\t<Space className={Style.page} vertical align=\"start\">\n\t\t\t<Banner type=\"info\" description=\"纯前端实现，可断网使用\" />\n\t\t\t<Banner type=\"info\" description=\"建议使用语音输入法，如讯飞输入法\" />\n\t\t\t<Upload\n\t\t\t\taction=\"\"\n\t\t\t\taccept=\"video/*\"\n\t\t\t\tmultiple\n\t\t\t\tdraggable\n\t\t\t\tshowClear={false}\n\t\t\t\tuploadTrigger=\"custom\"\n\t\t\t\tdragMainText=\"点击或拖拽以选择文件\"\n\t\t\t\tdragSubText=\"仅支持视频文件\"\n\t\t\t\tonFileChange={handleFileChange}\n\t\t\t\tclassName={Style.upload}\n\t\t\t/>\n\t\t\t{fileList.length > 0 && (\n\t\t\t\t<Typography.Text>{`共 ${fileList.length} 个`}</Typography.Text>\n\t\t\t)}\n\t\t\t<Button\n\t\t\t\tblock\n\t\t\t\tdisabled={fileList.length === 0}\n\t\t\t\tonClick={() => navigate('/rename')}\n\t\t\t>\n\t\t\t\t开始重命名\n\t\t\t</Button>\n\t\t</Space>\n\t);\n};\n\nexport default Index;\n","export const downloadFile = (file: File, fileName: string) => {\n\tconst newFile = new File([file], fileName, { type: file.type });\n\n\tconst aTag = document.createElement('a');\n\taTag.href = URL.createObjectURL(newFile);\n\taTag.download = newFile.name;\n\n\tdocument.body.appendChild(aTag);\n\taTag.click();\n\tdocument.body.removeChild(aTag);\n};\n\nexport const sleep = async (ms: number) =>\n\tnew Promise(resolve => {\n\t\tsetTimeout(resolve, ms);\n\t});\n"],"names":["Map","Object","i","model","draft","payload","taskList","task","sleep","navigate","useNavigate","fileList","setFileList","useModel","fileListModel","_","resetTaskList","taskListModel","useEffect","Space","Style","Banner","Upload","Typography","Button","downloadFile","file","fileName","newFile","File","aTag","document","URL","ms","Promise","resolve","setTimeout"],"mappings":"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"}