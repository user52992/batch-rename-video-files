{"version":3,"file":"static/js/async/exe-rename/page.821c71f5.js","sources":["webpack://batch-rename-video-files/./node_modules/.pnpm/@modern-js-reduck+store@1.1.13/node_modules/@modern-js-reduck/store/dist/esm/model/model.js","webpack://batch-rename-video-files/./src/models/task-list.ts","webpack://batch-rename-video-files/./src/routes/exe-rename/page.tsx","webpack://batch-rename-video-files/./src/utils.ts"],"sourcesContent":["import { initializerSymbol } from \"../utils/misc\";\nconst model = (name) => ({\n  define(modelDesc) {\n    let modelInitializer;\n    if (typeof modelDesc === \"function\") {\n      modelInitializer = modelDesc;\n    } else {\n      modelInitializer = () => modelDesc;\n    }\n    const modelCache = /* @__PURE__ */ new Map();\n    const createResponse = (initializer) => {\n      const response = (namespace) => {\n        const cachedModel = modelCache.get(namespace);\n        if (cachedModel) {\n          return cachedModel;\n        }\n        const clonedModelInitializer = (...args) => {\n          const result = initializer(...args);\n          return result;\n        };\n        const modelInstance = createResponse(clonedModelInitializer);\n        modelCache.set(namespace, modelInstance);\n        modelInstance._name = namespace || name;\n        return modelInstance;\n      };\n      response._name = name;\n      Object.defineProperty(response, initializerSymbol, {\n        configurable: false,\n        enumerable: false,\n        value: initializer\n      });\n      return response;\n    };\n    return createResponse(modelInitializer);\n  }\n});\nexport default model;\n","import { sleep } from '@/utils';\nimport { model } from '@modern-js/runtime/model';\n\ntype State = {\n\ttaskList: Array<() => void>;\n};\n\nexport default model<State>('task-list').define({\n\tstate: {\n\t\ttaskList: [],\n\t},\n\tactions: {\n\t\tresetTaskList: (draft: State) => {\n\t\t\tdraft.taskList = [];\n\t\t},\n\t\taddTask: (draft: State, payload: () => void) => {\n\t\t\tdraft.taskList.push(payload);\n\t\t},\n\t\texecuteAllTask: (draft: State) => {\n\t\t\tconst f = async (taskList: State['taskList']) => {\n\t\t\t\twhile (taskList.length > 0) {\n\t\t\t\t\tconst task = taskList.shift();\n\t\t\t\t\tawait sleep(1000);\n\t\t\t\t\ttask?.();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tf([...draft.taskList]);\n\t\t},\n\t},\n});\n","import taskListModel from '@/models/task-list';\nimport { Button } from '@douyinfe/semi-ui';\nimport { useModel } from '@modern-js/runtime/model';\nimport type { FC } from 'react';\n\nconst Index: FC = () => {\n\tconst [_, { executeAllTask }] = useModel(taskListModel);\n\n\treturn <Button onClick={() => executeAllTask()}>完成重命名</Button>;\n};\n\nexport default Index;\n","export const downloadFile = (file: File, fileName: string) => {\n\tconst newFile = new File([file], fileName, { type: file.type });\n\n\tconst aTag = document.createElement('a');\n\taTag.href = URL.createObjectURL(newFile);\n\taTag.download = newFile.name;\n\n\tdocument.body.appendChild(aTag);\n\taTag.click();\n\tdocument.body.removeChild(aTag);\n};\n\nexport const sleep = async (ms: number) =>\n\tnew Promise(resolve => {\n\t\tsetTimeout(resolve, ms);\n\t});\n"],"names":["Map","Object","model","draft","payload","taskList","task","sleep","_","executeAllTask","useModel","taskListModel","Button","downloadFile","file","fileName","newFile","File","aTag","document","URL","ms","Promise","resolve","setTimeout"],"mappings":"yJAoCA,KAnCc,AAAC,GAAU,EACvB,OAAO,CAAS,EAOd,IAAM,EAA6B,IAAIA,IACjC,EAAiB,AAAC,IACtB,IAAM,EAAW,AAAC,IAChB,IAAM,EAAc,EAAW,GAAG,CAAC,GACnC,GAAI,EACF,OAAO,EAMT,IAAM,EAAgB,EAJS,CAAC,GAAG,IAClB,KAAe,IAMhC,OAFA,EAAW,GAAG,CAAC,EAAW,GAC1B,EAAc,KAAK,CAAG,GAAa,EAC5B,CACT,EAOA,OANA,EAAS,KAAK,CAAG,EACjBC,OAAO,cAAc,CAAC,EAAU,IAAiB,CAAE,CACjD,aAAc,GACd,WAAY,GACZ,MAAO,CACT,GACO,CACT,EACA,OAAO,EA7BH,AAAqB,YAArB,OAAO,EACU,EAEA,IAAM,EA2B7B,CACF,E,iDC5BA,KAAeC,AAAAA,GAAAA,A,QAAAA,CAAAA,AAAAA,EAAa,aAAa,MAAM,CAAC,CAC/C,MAAO,CACN,SAAU,EAAE,AACb,EACA,QAAS,CACR,cAAe,AAACC,IACfA,EAAM,QAAQ,CAAG,EAAE,AACpB,EACA,QAAS,CAACA,EAAcC,KACvBD,EAAM,QAAQ,CAAC,IAAI,CAACC,EACrB,EACA,eAAgB,AAACD,QACCE,EAAAA,EAQf,IAAIF,EAAM,QAAQ,CAAC,CARJE,AAAAA,GAAAA,EAAAA,CAAAA,AAAAA,EAAAA,YAChB,KAAOA,EAAS,MAAM,CAAG,GAAG,CAC3B,IAAMC,EAAOD,EAAS,KAAK,EAC3B,MAAME,AAAAA,GAAAA,EAAAA,CAAAA,AAAAA,EAAM,KACZD,MAAAA,GAAAA,GACD,CACD,IAGD,CACD,CACD,E,6ECnBA,WANkB,KACjB,GAAM,CAACE,EAAG,CAAEC,eAAAA,CAAc,CAAE,CAAC,CAAGC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAASC,EAAAA,CAAaA,EAEtD,MAAO,UAACC,EAAAA,EAAMA,CAAAA,CAAC,QAAS,IAAMH,I,SAAkB,gC,EACjD,C,gECTaI,EAAe,CAACC,EAAYC,KACxC,IAAMC,EAAU,IAAIC,KAAK,CAACH,EAAK,CAAEC,EAAU,CAAE,KAAMD,EAAK,IAAI,AAAC,GAEvDI,EAAOC,SAAS,aAAa,CAAC,IACpCD,CAAAA,EAAK,IAAI,CAAGE,IAAI,eAAe,CAACJ,GAChCE,EAAK,QAAQ,CAAGF,EAAQ,IAAI,CAE5BG,SAAS,IAAI,CAAC,WAAW,CAACD,GAC1BA,EAAK,KAAK,GACVC,SAAS,IAAI,CAAC,WAAW,CAACD,EAC3B,EAEaX,EAAQ,AAAOc,GAAAA,AAAAA,GAAAA,EAAAA,CAAAA,AAAAA,EAAAA,Y,OAC3B,IAAIC,QAAQC,AAAAA,IACXC,WAAWD,EAASF,EACrB,E"}